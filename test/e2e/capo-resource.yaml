apiVersion: v1
kind: Namespace
metadata:
  name: ip-reserve
---
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
#  annotations:
#    cert-manager.io/inject-ca-from: ip-reserve/ip-reserve-serving-cert
  name: ip-reserve-validating-webhook-configuration
webhooks:
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZlakNDQTJLZ0F3SUJBZ0lDQm5vd0RRWUpLb1pJaHZjTkFRRUxCUUF3RWpFUU1BNEdBMVVFQ2hNSFkyRncKYnk1cGJ6QWdGdzB5TWpFeU1UWXdOalV5TXpKYUdBOHlNVEl5TVRJeE5qQTJOVEl6TWxvd1FERVFNQTRHQTFVRQpDaE1IWTJGd2J5NXBiekVzTUNvR0ExVUVBeE1qWTJGd2J5MTNaV0pvYjI5ckxYTmxjblpwWTJVdWFYQXRjbVZ6ClpYSjJaUzV6ZG1Nd2dnSWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUURWSTkyQnVlT1QKQkxjRHczK0F3RXZzKzBTVzV1WVFiaDF3Q1R3S0NZQnpqSUY1TFpGMzI5WnpNMjJXVkk4UXV4VktjbzR1TEJ1MwpsV2dXR0x0UnlnZFRlQzlvYlc2MFZoSHR6ekxZZ25VYUJZSzhCMnk0QnphYjlocXhvb3pMZE5aWCtwc0RIZ1hUCmRBWStVSjkyelFjRVJlYkoxYURkZjNKZlNlREFOUjhxdzRiL0MyZkVUb2NITlE4RVhkdWR4S3ZFUTV1MnpGMWUKcEhLK1JDVndKbFI0S282V1c4VWpBMlRPZTZLL0RUcjNlbThPQnFoelByQmdxRGdKSjcvdFJlQytQRWdqeFlOTgpFd3oxUlN4Sno3RjZxbzBlU0E1WFI5bDBGNDFkTy9xN25pcklkTmt4WEpJUGF3ODB4bzN3V0Y2L0RkL1V2eVJNCmtJNjljZnVFTEpOK1lwSjBYTnBWSmZaRHFzeng4TU40NWlUbnZtS2dsLzZ0VFErUXhKNlowbnBUQXpDekNSL2wKWjlqMXJhVnF0NWh2T3Q1Wjk4WmUyc0F4YjhSbCtCWTNYdDF1blg3Z1orU09aYjBtZk11ek83TmVEY0o1YlZqVgp5ZlVXRkNZb1hZYnB0d0tuWTQ4QTYvRHdRMHh2cVkrUUxaZHNWOHpPbVU4ZmJHQ2U0TVoxWlhKQXNCRUhmeDZqCkFraWVUY0FyM1JNaFF1V1JqNFE3aS93M0RvTm9IbjlibWhTekFwbG8zNGxjSmhoWCtPS3FFZ01kUEhHMjY0S00KcHI2WWNDdzlWZktjS2JYMm1EWTliMUVybzM5MU5BT213eWEyUjVsU3pEaHlUQzVkVTI1YVhVUVNqaXBiUDZJZAowU25rMkg5NmdLTGZyK25pSUR2eWtSa0FXSC9LWTcrMStRSURBUUFCbzRHcE1JR21NQTRHQTFVZER3RUIvd1FFCkF3SUhnREFkQmdOVkhTVUVGakFVQmdnckJnRUZCUWNEQWdZSUt3WUJCUVVIQXdFd0RnWURWUjBPQkFjRUJRRUMKQXdRR01HVUdBMVVkRVFSZU1GeUNGR05oY0c4dGQyVmlhRzl2YXkxelpYSjJhV05sZ2g5allYQnZMWGRsWW1odgpiMnN0YzJWeWRtbGpaUzVwY0MxeVpYTmxjblpsZ2lOallYQnZMWGRsWW1odmIyc3RjMlZ5ZG1salpTNXBjQzF5ClpYTmxjblpsTG5OMll6QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FnRUFvd3VXV1A2UTdHRFl2bmtiTis0UjB3NjQKMjgzd2lnK09Sd2QxQ3J0a2tUUW84N1Y2dnl1YlhPc05NQWh6ZVhRTjl2aFZ5Y0ZCZFJYZElEM01LamdmRmMrdApmVFFqMHI4Umhib1oxOU1PQ05vYTJLOW9oaldMclErMk9XL3drck11MUd6K1ZlTkM5NHhJUW5INzhxTWpVZkJzCnFMYmJIWU8xSHlpb0JQTlJUQ0Z1OUZGd1lmMXhobWsrRnp4NUlNZTFSSmdFb09SaG1YVWVRaEphNmI1VHpacTMKSVVBYjQ2Sk56MmthOTdxOEJhRzJkeklsc012YTNHVGRUMzhxVFV1cUt5ckVqZ1JSNWY4cjIxTUtDRmpOdDR3MwpXRWRMWjhlQThnVjJxdUVRTm9GMlhhVUdUWk9sa0lZVVpSTHpISVAxZ1ZYbDFUVm5lUXJxSldmNFhwaEJ2bVZyCllQZU1rbjV3amxkZThXVU1QRGlSTEMxbU9OTE9xb2JDSGE4cEQwWWxpUlVXNzgwUmdyS21wOE84R1E5aTdaK04KQ1B5QVU1OTRDclRnWXFlbVd0ZTNreU4wK3Zob1dlYkNkeXE5b0h4M1h0U25ydS9tZEdJSmlVV29TVEFncUMrcwpSbHZ1MWoxN3hmeDBHNGlFQXhuSjVjbXpyUy9KTVJnVFBSaVY5b2tyUmxHWkIvaEdMaG9LTzRJaVZpR2lQMzJJCmFzeUJiRDBPcWw3SGViM2syMDRUbnBrSFJjM0l1ZXZpTnROcVVYbDF0dXFHVWVMRnl4SVFWdFhXMnMzUFF0eGEKYnNOdFhxL0F1ZGw2ekpISDgrVnNidGZNcDJzalZPQ0kxcHJ3aUdjU0JQcit0T3ZmcGJUL2gwR0ZkZjdlUTdzRgpZQ1NMT2M2L2NkVmFicTlCalRvPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      service:
        name: capo-webhook-service
        namespace: ip-reserve
        path: /pod-ip-reservation
    failurePolicy: Fail
    name: pod.ip.io
    namespaceSelector:
      matchExpressions:
        - key: ip-reserve
          operator: In
          values:
            - enabled
    rules:
      - apiGroups:
          - ""
        apiVersions:
          - v1
        operations:
          - DELETE
        resources:
          - pods
      - apiGroups:
          - ""
        apiVersions:
          - v1
        operations:
          - CREATE
        resources:
          - pods/eviction
        scope: '*'
    sideEffects: None
---
apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZlakNDQTJLZ0F3SUJBZ0lDQm5vd0RRWUpLb1pJaHZjTkFRRUxCUUF3RWpFUU1BNEdBMVVFQ2hNSFkyRncKYnk1cGJ6QWdGdzB5TWpFeU1UWXdOalV5TXpKYUdBOHlNVEl5TVRJeE5qQTJOVEl6TWxvd1FERVFNQTRHQTFVRQpDaE1IWTJGd2J5NXBiekVzTUNvR0ExVUVBeE1qWTJGd2J5MTNaV0pvYjI5ckxYTmxjblpwWTJVdWFYQXRjbVZ6ClpYSjJaUzV6ZG1Nd2dnSWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUURWSTkyQnVlT1QKQkxjRHczK0F3RXZzKzBTVzV1WVFiaDF3Q1R3S0NZQnpqSUY1TFpGMzI5WnpNMjJXVkk4UXV4VktjbzR1TEJ1MwpsV2dXR0x0UnlnZFRlQzlvYlc2MFZoSHR6ekxZZ25VYUJZSzhCMnk0QnphYjlocXhvb3pMZE5aWCtwc0RIZ1hUCmRBWStVSjkyelFjRVJlYkoxYURkZjNKZlNlREFOUjhxdzRiL0MyZkVUb2NITlE4RVhkdWR4S3ZFUTV1MnpGMWUKcEhLK1JDVndKbFI0S282V1c4VWpBMlRPZTZLL0RUcjNlbThPQnFoelByQmdxRGdKSjcvdFJlQytQRWdqeFlOTgpFd3oxUlN4Sno3RjZxbzBlU0E1WFI5bDBGNDFkTy9xN25pcklkTmt4WEpJUGF3ODB4bzN3V0Y2L0RkL1V2eVJNCmtJNjljZnVFTEpOK1lwSjBYTnBWSmZaRHFzeng4TU40NWlUbnZtS2dsLzZ0VFErUXhKNlowbnBUQXpDekNSL2wKWjlqMXJhVnF0NWh2T3Q1Wjk4WmUyc0F4YjhSbCtCWTNYdDF1blg3Z1orU09aYjBtZk11ek83TmVEY0o1YlZqVgp5ZlVXRkNZb1hZYnB0d0tuWTQ4QTYvRHdRMHh2cVkrUUxaZHNWOHpPbVU4ZmJHQ2U0TVoxWlhKQXNCRUhmeDZqCkFraWVUY0FyM1JNaFF1V1JqNFE3aS93M0RvTm9IbjlibWhTekFwbG8zNGxjSmhoWCtPS3FFZ01kUEhHMjY0S00KcHI2WWNDdzlWZktjS2JYMm1EWTliMUVybzM5MU5BT213eWEyUjVsU3pEaHlUQzVkVTI1YVhVUVNqaXBiUDZJZAowU25rMkg5NmdLTGZyK25pSUR2eWtSa0FXSC9LWTcrMStRSURBUUFCbzRHcE1JR21NQTRHQTFVZER3RUIvd1FFCkF3SUhnREFkQmdOVkhTVUVGakFVQmdnckJnRUZCUWNEQWdZSUt3WUJCUVVIQXdFd0RnWURWUjBPQkFjRUJRRUMKQXdRR01HVUdBMVVkRVFSZU1GeUNGR05oY0c4dGQyVmlhRzl2YXkxelpYSjJhV05sZ2g5allYQnZMWGRsWW1odgpiMnN0YzJWeWRtbGpaUzVwY0MxeVpYTmxjblpsZ2lOallYQnZMWGRsWW1odmIyc3RjMlZ5ZG1salpTNXBjQzF5ClpYTmxjblpsTG5OMll6QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FnRUFvd3VXV1A2UTdHRFl2bmtiTis0UjB3NjQKMjgzd2lnK09Sd2QxQ3J0a2tUUW84N1Y2dnl1YlhPc05NQWh6ZVhRTjl2aFZ5Y0ZCZFJYZElEM01LamdmRmMrdApmVFFqMHI4Umhib1oxOU1PQ05vYTJLOW9oaldMclErMk9XL3drck11MUd6K1ZlTkM5NHhJUW5INzhxTWpVZkJzCnFMYmJIWU8xSHlpb0JQTlJUQ0Z1OUZGd1lmMXhobWsrRnp4NUlNZTFSSmdFb09SaG1YVWVRaEphNmI1VHpacTMKSVVBYjQ2Sk56MmthOTdxOEJhRzJkeklsc012YTNHVGRUMzhxVFV1cUt5ckVqZ1JSNWY4cjIxTUtDRmpOdDR3MwpXRWRMWjhlQThnVjJxdUVRTm9GMlhhVUdUWk9sa0lZVVpSTHpISVAxZ1ZYbDFUVm5lUXJxSldmNFhwaEJ2bVZyCllQZU1rbjV3amxkZThXVU1QRGlSTEMxbU9OTE9xb2JDSGE4cEQwWWxpUlVXNzgwUmdyS21wOE84R1E5aTdaK04KQ1B5QVU1OTRDclRnWXFlbVd0ZTNreU4wK3Zob1dlYkNkeXE5b0h4M1h0U25ydS9tZEdJSmlVV29TVEFncUMrcwpSbHZ1MWoxN3hmeDBHNGlFQXhuSjVjbXpyUy9KTVJnVFBSaVY5b2tyUmxHWkIvaEdMaG9LTzRJaVZpR2lQMzJJCmFzeUJiRDBPcWw3SGViM2syMDRUbnBrSFJjM0l1ZXZpTnROcVVYbDF0dXFHVWVMRnl4SVFWdFhXMnMzUFF0eGEKYnNOdFhxL0F1ZGw2ekpISDgrVnNidGZNcDJzalZPQ0kxcHJ3aUdjU0JQcit0T3ZmcGJUL2gwR0ZkZjdlUTdzRgpZQ1NMT2M2L2NkVmFicTlCalRvPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS0FJQkFBS0NBZ0VBMVNQZGdibmprd1MzQThOL2dNQkw3UHRFbHVibUVHNGRjQWs4Q2dtQWM0eUJlUzJSCmQ5dldjek50bGxTUEVMc1ZTbktPTGl3YnQ1Vm9GaGk3VWNvSFUzZ3ZhRzF1dEZZUjdjOHkySUoxR2dXQ3ZBZHMKdUFjMm0vWWFzYUtNeTNUV1YvcWJBeDRGMDNRR1BsQ2ZkczBIQkVYbXlkV2czWDl5WDBuZ3dEVWZLc09HL3d0bgp4RTZIQnpVUEJGM2JuY1NyeEVPYnRzeGRYcVJ5dmtRbGNDWlVlQ3FPbGx2Rkl3Tmt6bnVpdncwNjkzcHZEZ2FvCmN6NndZS2c0Q1NlLzdVWGd2anhJSThXRFRSTU05VVVzU2MreGVxcU5Ia2dPVjBmWmRCZU5YVHY2dTU0cXlIVFoKTVZ5U0Qyc1BOTWFOOEZoZXZ3M2YxTDhrVEpDT3ZYSDdoQ3lUZm1LU2RGemFWU1gyUTZyTThmRERlT1lrNTc1aQpvSmYrclUwUGtNU2VtZEo2VXdNd3N3a2Y1V2ZZOWEybGFyZVlienJlV2ZmR1h0ckFNVy9FWmZnV04xN2RicDErCjRHZmtqbVc5Sm56THN6dXpYZzNDZVcxWTFjbjFGaFFtS0YyRzZiY0NwMk9QQU92dzhFTk1iNm1Qa0MyWGJGZk0KenBsUEgyeGdudURHZFdWeVFMQVJCMzhlb3dKSW5rM0FLOTBUSVVMbGtZK0VPNHY4Tnc2RGFCNS9XNW9Vc3dLWgphTitKWENZWVYvamlxaElESFR4eHR1dUNqS2ErbUhBc1BWWHluQ20xOXBnMlBXOVJLNk4vZFRRRHBzTW10a2VaClVzdzRja3d1WFZOdVdsMUVFbzRxV3oraUhkRXA1TmgvZW9DaTM2L3A0aUE3OHBFWkFGaC95bU8vdGZrQ0F3RUEKQVFLQ0FnRUFwZjRvcEwrQTNSN3U2WjkzelczMXM3cDgwSWxDNDhqZVpFTE0zNFJHNWJhbm54ZytFbnJEcVRTRQpSRy9XZTlFMzQ2TVQyQ0hCOUZnSG1DM3F0T2dDako4dFRNYnRVTVUzY1YzTTI1RytZV1dwUzRiOHhOWFpVZDE1CkxKN0x5Q2hXUm02R0N3ZDJ3aGU2UlEzRkkyREo5aW42YzNaTXNqUnZmb2FxNHdaOEgzSG4wUG13OXRHeGw0dGIKQnF1U1Btek0yUzFPT0M4eENHUktlS1BhQkYzVnEwQjVpK0FzeC9mOHFsTGZqS3RoSVJ2WkliTk52WE0xS2hIWQpra2pDMEtkN1FLenlBZW54T0RWK0FnYTlWejdKbWg3NWlIdlZyMlBsbHVSQTFEdkNLaHdrZGJtSzdVYUsramNHCndMTmlGNnk3SFZCUTRmOTY1YVl2aEpzZ3B1K1FiWkJNT3R3bjROMWdRNlkvZ01reUczVzd1UG1jMzBya1FKWUsKVUx1bGlObnBFYSt0VStPUmNTaXFLczRzZFBTZ2F4YXViUytFMVloak9LaHBhaEpESk03WVdOQ2k1WGFPUEo1aApFdFpBSFBIMmFQSDl1cVNmVU16SjQyNTl0eGdhVjBsRXVaL2pWdHZ4WXdVUk5UL1VtL3c4VGtJQk0rK21PcjhSCnlZZkNUN3NtQVVEQ05hZjQycE9XcTYzRU1UMzhpcEZZWkRwaTNKSTJKYUN5aU1lODFjT2V2bTFlWTJQSVFtQUoKbGRVNXgrb2FmcFBQTitnRTY5ZlpvYjA4MXY4UUZrdEpRVVJ0M3pkV1Nwd1dnb04zeE1RdlY2WmpnZjJMTjFnagpUR09DQlpVYXFVUHFOczBFSnNsV1B0Z21LMU9kNU4rTGdtR210aElUbHl4YkZqVmk3Z0VDZ2dFQkFQOW1iS2o0Cnk0ZHlkcnVnU1ArSmhXYTFmM3YrV3BjTm5aWGtadUlwUzc4Q21hdStucnd5RjJTUlRZeXdvZDVIUnRtNGNrNmcKdmhzOW9nKzlTc2pOc3ZLV0J1ei9XSllSeEsreGJyeFFFT2F2RHlzeWFWQ09LNHgxV28vWjdNNmlaclJQWCtabAp1d2w3dy9CQk0zQVhHd0dOK0dDRFpEVDZrdjFvcnZxK0o2TmE4UjRzZkFOVnlqbHloTndoZ01mTHhpdW5nRmh4CmQ0SmVvbXNsL2tWZWlnbGdjSmVhTFViTkpCZnFYSkVxM2swNUdMSVR5YUNQb2VjczZIM2tzeG5iTkpUeHRnYnEKcjU1NEZ4czZMa0doOWpZMmpTMGc2QWFlU3JkQkN5MUk2ekN2dk9JejQvRmRKb3FjdG9QQTNVc2VmS3hPR0x2agp3UkVydjNwclpZV243STBDZ2dFQkFOV2tCNEFHZDhiMG9NT0FrU1Q1UHVUcW1VUU1NWlMrN1dXVVFoY216QktUClJhZ0Z1UTBGeHFqSHpNTHlNMnFmemcvT2FZUk5QeGpKQTlkRklLblhGbU9nU05QOWt1MVVzckkwanpCQjZ2TGEKY1ZuSUxOU1lwRDJ2cEI4dEVUeWczUWlvcS9DVHUyQVd6YTBrOGFxVEh6Z2MrMGI2ZjlDSm4xaVlqbGlTTjU4bgpOL0UybS9iUkJRVkNSL2VQR3NnQ0l3R1BWVldJZFhKVVJiZWduYmdKWmQzTmNxc05tQWplRGMxRzZSMHF1cnh1ClUrckNWNWE0dHo1V2ZvN0dqa1NQL3FMa25FNUtRRzJNMVFyQXRia2NlT0IxWmRNU1M4b3d3c1VhdUZxMzdUWmUKYWhBRW5kNi9BaDgrVld2VTZBaXc0aVRwSTRjZ3M0ckszQktoOFl0NEVoMENnZ0VBQjVOcU5ianJrS0Q4bEtRMApoaC8yTFEzRk1sQmhMNG5mMnNwam91SEd0V3ZHVXluY1c0akEyT0xXZ2czYlAxU3Q3VmRqVEtISUFkYmFMODFWCm9vODNkNnFybWV3WkhKcDZVeHZZUlEyNjhwek92bUZJYm5OSkoybHp2a0NnbmFDRG0yV2ZXcDQ1NWhZZHdjcXQKVSszYmh6aEczZFlINnVwajRkQnhJRTd6cmd6TWlqQ1huU0cyVmUzbnN2L3JhZ0hKWnhJWTVJYTVITXpoMUh2VQpCd3ErM1hoVzNxaGNIM1dHVkk5SEg2Yzk0TnlJdHYrUFE0di9LWFJUa1Nodmg1elErbm9SQkRPQjhobHQxZ2pyCnhsYWZqd3dmTSs5OThuUlBreEFDM04wRTNQVFpqWHdzanNSTW1GLzlxZnJXbFp2WjV1S0tLVWlnT1hvcXU5N2oKckF0SElRS0NBUUJmdnJwcHd2eE5HdmN0aHVJRm12cDM1emUzQ212eUNMc2w2aExRZzErejkzS2hRYWRVVWNGZApoT1djZktWVVpMZ1oxMXpzb1IzbEFybUk4WDhZL3I4VytRK0tpanNkeC9hcDdPbzdLMStiWlJDbHR4TjRWOHhMCnBQcTl5aG5PZlIxeU12MlR2UEdkdDdxSG5XWDlGeUJIcXAxbWl2OWJPMEpCbDJVOEJwT003U3VpRytJNzlDTDIKMzJTWGF2Z0txUUo5UVhweDhjMEk1d0d6c1BUZU5NQUZibnkwY2t3dnRTeWtVZUpKWXd2N1JNcXhERlhxdzIvRQpMVWxjdlZtbkdvMTQvVkdidUtVMU00ZUs0U0RRREJXVUtxanV0bVZuQVFGWkNvZVNpSmx6NDA1UFRYSmZFR1ZvCkVTeUJQaEtiU29LZkhpa0E5MFBmc05oK05UdW1VTEoxQW9JQkFHRE5PaldncGllYmpzenBDZ1BLcFZTTldYRVIKb3RVdERnMldxVzJBODRZaTh5alZORVZ1UlNWcDU2Wm12TGt2c1VkaGJsaDMvS29INFRDd1dieUMwKzhRMjJCMgozY2t1aTRtazN4a0M0OXh5ckkyM3BxYkhkY3RBcTRBQnpRcWlYZG1EZUtCaHpxT29vR0lwRnM3UXRnK1lYMDJRCktnbGplbFBKMVVYby9pamd0YjczRmFDSEdVZkszNFAvWGRkSnJwNkJsSTlLUlhheHlhMTFqTVc2eWFpR3NpdTUKdVdqK0ZITXE2WlZyZ0o5dWN0RmplSFRkc3BuM29MN3p5djFHZFl5c1dXd2ZJYVo0RHBkb0lReGhDSURseFJURgpqZlhpUytSTExqY0krSFRkY1UyTlJFbnhPU0poVjkwOTlKY2FjWk84ZTNlVHlzbUFFU3ZpZE1HRjIwbz0KLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
kind: Secret
metadata:
  name: webhook-server-cert
  namespace: ip-reserve
type: kubernetes.io/tls

---

apiVersion: v1
kind: Service
metadata:
  name: capo-webhook-service
  namespace: ip-reserve
spec:
  ports:
    - protocol: TCP
      port: 443
      targetPort: 9443

---
apiVersion: v1
kind: Endpoints
metadata:
  name: capo-webhook-service
  namespace: ip-reserve
subsets:
  - addresses:
      - ip: 1.1.1.1
    ports:
      - port: 9443
        protocol: TCP